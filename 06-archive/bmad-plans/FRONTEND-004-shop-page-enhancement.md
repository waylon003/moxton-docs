# Tech-Spec: Shopé¡µé¢å…¨é¢å¢å¼º - åˆ—è¡¨é¡µä¸è¯¦æƒ…é¡µé‡æ„

**åˆ›å»ºæ—¶é—´:** 2025-12-11
**çŠ¶æ€:** å‡†å¤‡å¼€å‘
**ä¼˜å…ˆçº§:** é«˜

## æ¦‚è¿°

### é—®é¢˜é™ˆè¿°

å½“å‰shopé¡µé¢ç¼ºå°‘åˆ†ç±»ä¿¡æ¯å±•ç¤ºï¼Œå•†å“å¡ç‰‡æ— æ³•åŒºåˆ†æœ‰ä»·æ ¼å•†å“å’Œå’¨è¯¢å•†å“ï¼Œä¸”å¡ç‰‡é«˜åº¦ä¸ä¸€è‡´å¯¼è‡´è§†è§‰æ•ˆæœä¸ä½³ã€‚åŒæ—¶ï¼Œå•†å“è¯¦æƒ…é¡µå³ä¾§ä¾§è¾¹æ éœ€è¦é‡æ„ä»¥æ”¯æŒå’¨è¯¢å•†å“åŠŸèƒ½ï¼Œå¹¶ä¼˜åŒ–ç”¨æˆ·ä½“éªŒã€‚éœ€è¦æ ¹æ®æœ€æ–°çš„APIæ–‡æ¡£(v1.4.0)æ·»åŠ hasPriceå­—æ®µå’Œtagså­—æ®µçš„æ”¯æŒï¼Œå…¨é¢æå‡ç”¨æˆ·è´­ç‰©ä½“éªŒã€‚

### è§£å†³æ–¹æ¡ˆ

1. **Shopåˆ—è¡¨é¡µä¼˜åŒ–:**
   - åœ¨ç­›é€‰å·¥å…·æ ä¸Šæ–¹æ·»åŠ å½“å‰é€‰ä¸­çš„åˆ†ç±»åç§°å’Œæè¿°
   - é‡æ„å•†å“å¡ç‰‡ç»„ä»¶ï¼Œæ·»åŠ å•†å“æ ‡ç­¾æ˜¾ç¤º
   - ç§»é™¤å•†å“å¡ç‰‡æ‚¬æµ®æ—¶çš„çœ¼ç›å’Œè´­ç‰©è½¦å›¾æ ‡
   - ç»Ÿä¸€å•†å“å¡ç‰‡é«˜åº¦
   - æ ¹æ®hasPriceå­—æ®µåŒºåˆ†è´­ä¹°å•†å“å’Œå’¨è¯¢å•†å“

2. **å•†å“è¯¦æƒ…é¡µé‡æ„:**
   - é‡æ„ShopProductInfoç»„ä»¶ï¼Œæ·»åŠ è¿”å›æŒ‰é’®
   - æ·»åŠ å•†å“æ ‡ç­¾å’Œè§„æ ¼ä¿¡æ¯æ˜¾ç¤º
   - å®ç°è´­ä¹°/å’¨è¯¢å•†å“çš„UIåˆ‡æ¢é€»è¾‘
   - ä¿æŒç°æœ‰æ•°é‡æ§åˆ¶å’Œä»·æ ¼åŠ¨ç”»æ•ˆæœ
   - é›†æˆå’¨è¯¢è¡¨å•å¼¹çª—åŠŸèƒ½

3. **å’¨è¯¢åŠŸèƒ½é›†æˆ:**
   - åˆ›å»ºç»Ÿä¸€çš„å’¨è¯¢è¡¨å•å¼¹çª—ç»„ä»¶
   - é›†æˆç¦»çº¿å’¨è¯¢è®¢å•API
   - æ”¯æŒæœ‰ä»·æ ¼å’Œæ— ä»·æ ¼å•†å“çš„ä¸åŒæ“ä½œæµç¨‹

### èŒƒå›´ç•Œå®š

**åŒ…å«:**
- shop/indexé¡µé¢åˆ†ç±»ä¿¡æ¯å±•ç¤º
- ProductCardç»„ä»¶é‡æ„
- ShopProductInfoç»„ä»¶é‡æ„ (å•†å“è¯¦æƒ…é¡µ)
- æ–°å¢å•†å“æ ‡ç­¾æ˜¾ç¤º (åˆ—è¡¨é¡µå’Œè¯¦æƒ…é¡µ)
- ä»·æ ¼åŒºåˆ†é€»è¾‘ (è´­ä¹° vs å’¨è¯¢)
- å•†å“è¯¦æƒ…é¡µè¿”å›æŒ‰é’®åŠŸèƒ½
- å•†å“è¯¦æƒ…é¡µè§„æ ¼ä¿¡æ¯æ˜¾ç¤º
- å’¨è¯¢è¡¨å•å¼¹çª—ç»„ä»¶
- ç±»å‹å®šä¹‰æ›´æ–°

**ä¸åŒ…å«:**
- è´­ç‰©è½¦åŠŸèƒ½ä¿®æ”¹
- åˆ†ç±»APIä¿®æ”¹
- å•†å“è¯¦æƒ…é¡µå¸ƒå±€ç»“æ„å¤§æ”¹ (ä¿æŒç°æœ‰å›ºå®šä¾§è¾¹æ )

## å¼€å‘ä¸Šä¸‹æ–‡

### ä»£ç åº“æ¨¡å¼

**æŠ€æœ¯æ ˆ:**
- Nuxt 3 (v3.20.1) + Vue 3 + TypeScript
- UnoCSS (Windé¢„è®¾) + å“åº”å¼è®¾è®¡
- Composition APIæ¨¡å¼
- å›½é™…åŒ–æ”¯æŒ (i18n)
- PiniaçŠ¶æ€ç®¡ç†

**æ–‡ä»¶ç»“æ„:**
```
pages/shop/index.vue          # ä¸»é¡µé¢ (éœ€ä¿®æ”¹)
pages/product/[id].vue        # å•†å“è¯¦æƒ…é¡µ (éœ€ä¿®æ”¹)
components/shop/
â”œâ”€â”€ CategorySidebar.vue      # åˆ†ç±»ä¾§è¾¹æ 
â”œâ”€â”€ ProductCard.vue          # å•†å“å¡ç‰‡ (éœ€é‡æ„)
â”œâ”€â”€ ProductInfo.vue          # å•†å“ä¿¡æ¯ç»„ä»¶ (éœ€é‡æ„)
â”œâ”€â”€ ProductFilter.vue        # ç­›é€‰å·¥å…·æ 
â”œâ”€â”€ ProductGrid.vue          # å•†å“ç½‘æ ¼
â””â”€â”€ ConsultationModal.vue    # å’¨è¯¢å¼¹çª—ç»„ä»¶ (æ–°å»º)
types/shop.ts                # ç±»å‹å®šä¹‰ (éœ€æ›´æ–°)
```

### éœ€è¦å¼•ç”¨çš„æ–‡ä»¶

1. **API_DOCUMENTATION.md** - ç¦»çº¿å’¨è¯¢è®¢å•APIå’ŒhasPriceå­—æ®µè§„èŒƒ
2. **ç°æœ‰ProductCardç»„ä»¶** - äº†è§£å½“å‰å¸ƒå±€å’Œæ ·å¼æ¨¡å¼
3. **Categoryç±»å‹å®šä¹‰** - å·²åŒ…å«descriptionå­—æ®µ
4. **ç°æœ‰shopé¡µé¢å¸ƒå±€** - ç­›é€‰å·¥å…·æ åŒºåŸŸç»“æ„

### æŠ€æœ¯å†³ç­–

1. **æ ‡ç­¾æ ·å¼:** æ·±è‰²èƒŒæ™¯ã€åœ†è§’ã€ç®€æ´æ–‡å­— (å‚è€ƒç”¨æˆ·æä¾›çš„æ ·å¼å›¾)
2. **æ ‡ç­¾æ˜¾ç¤ºç­–ç•¥:** æœ€å¤šæ˜¾ç¤º3ä¸ªæ ‡ç­¾ï¼Œè¶…å‡ºéƒ¨åˆ†æ˜¾ç¤º"+N"æ›´å¤šæç¤º
3. **å’¨è¯¢è¡¨å•:** ä½¿ç”¨å¼¹çª—æ¨¡å¼ï¼Œå­—æ®µæŒ‰APIæ–‡æ¡£è§„èŒƒ
4. **å¡ç‰‡é«˜åº¦:** ä½¿ç”¨å›ºå®šé«˜åº¦ç¡®ä¿ä¸€è‡´æ€§ (åˆ—è¡¨é¡µ)
5. **ä»·æ ¼åŒºåˆ†:** hasPriceå­—æ®µæ§åˆ¶æ˜¾ç¤ºé€»è¾‘
6. **å“åº”å¼:** ä¿æŒç°æœ‰çš„ç§»åŠ¨ç«¯é€‚é…
7. **å•†å“è¯¦æƒ…é¡µå¸ƒå±€:** ä¿æŒç°æœ‰å›ºå®šä¾§è¾¹æ ç»“æ„ï¼Œé‡æ„å†…éƒ¨ç»„ä»¶
8. **åŠ¨ç”»æ•ˆæœä¿æŒ:** ä¿ç•™ç°æœ‰æ•°é‡æ§åˆ¶å’Œä»·æ ¼è®¡ç®—çš„æ»šåŠ¨åŠ¨ç”»
9. **ç»„ä»¶å¤ç”¨:** ConsultationModalç»„ä»¶åœ¨åˆ—è¡¨é¡µå’Œè¯¦æƒ…é¡µå¤ç”¨
10. **è¿”å›æŒ‰é’®:** æ·»åŠ åˆ°ProductInfoç»„ä»¶é¡¶éƒ¨ï¼Œä½¿ç”¨æµè§ˆå™¨å†å²API

## å®ç°è®¡åˆ’

### ä»»åŠ¡åˆ—è¡¨

#### ä»»åŠ¡1: ç±»å‹å®šä¹‰æ›´æ–°
- [ ] æ›´æ–° `types/shop.ts` ä¸­çš„Productæ¥å£
- [ ] æ·»åŠ  `hasPrice: boolean` å­—æ®µ
- [ ] æ·»åŠ  `tags: string[] | null` å­—æ®µ

#### ä»»åŠ¡2: Shopé¡µé¢åˆ†ç±»ä¿¡æ¯æ˜¾ç¤º
- [ ] è·å–å½“å‰é€‰ä¸­åˆ†ç±»çš„è¯¦ç»†ä¿¡æ¯
- [ ] åœ¨ç­›é€‰å·¥å…·æ ä¸Šæ–¹æ·»åŠ åˆ†ç±»åç§°(h1)å’Œæè¿°(p)å±•ç¤º
- [ ] å¤„ç†æ— åˆ†ç±»é€‰ä¸­æ—¶çš„é»˜è®¤æ˜¾ç¤º
- [ ] é»˜è®¤çŠ¶æ€(é€‰ä¸­"View All Products")æ˜¾ç¤º:
  - æ ‡é¢˜: "View All Products"
  - æè¿°: "é€‰è´­æˆ‘ä»¬å…¨é¢çš„é«˜å“è´¨ç‰§åœºç•œç‰§å¤„ç†è®¾å¤‡ï¼Œæ—¨åœ¨æå‡ç‰§åœºçš„æ•ˆç‡å’Œå®‰å…¨æ€§ï¼Œæˆ‘ä»¬æ‹¥æœ‰æ‚¨æœ‰æ•ˆç®¡ç†ç‰²ç•œæ‰€éœ€çš„ä¸€åˆ‡ã€‚"

#### ä»»åŠ¡3: ProductCardç»„ä»¶é‡æ„
- [ ] ç§»é™¤æ‚¬æµ®overlay actions (çœ¼ç›å’Œè´­ç‰©è½¦å›¾æ ‡)
- [ ] æ·»åŠ å•†å“æ ‡ç­¾æ˜¾ç¤ºåŒºåŸŸ (æ ‡é¢˜å’Œæè¿°ä¹‹é—´)
- [ ] å®ç°å¤šæ ‡ç­¾é™åˆ¶æ˜¾ç¤ºé€»è¾‘ (æœ€å¤š3ä¸ªï¼Œè¶…å‡ºæ˜¾ç¤º"+N")
- [ ] å®ç°å›ºå®šå¡ç‰‡é«˜åº¦å¸ƒå±€
- [ ] æ ¹æ®hasPriceå­—æ®µåŒºåˆ†ä»·æ ¼æ˜¾ç¤ºé€»è¾‘
- [ ] æ›´æ–°æ ·å¼ä¸ºæ·±è‰²æ ‡ç­¾é£æ ¼ (å‚è€ƒç”¨æˆ·æä¾›çš„æ ·å¼å›¾)

#### ä»»åŠ¡4: å’¨è¯¢è¡¨å•å¼¹çª—ç»„ä»¶
- [ ] åˆ›å»º `ConsultationModal.vue` ç»„ä»¶
- [ ] å®ç°è¡¨å•å­—æ®µ (å§“åã€ç”µè¯ã€é‚®ç®±ã€å…¬å¸ã€ç•™è¨€)
- [ ] é›†æˆç¦»çº¿å’¨è¯¢è®¢å•API
- [ ] æ·»åŠ è¡¨å•éªŒè¯å’Œæäº¤å¤„ç†

#### ä»»åŠ¡5: ä»·æ ¼åŒºåˆ†é€»è¾‘å®ç° (ProductCard)
- [ ] æœ‰ä»·æ ¼å•†å“: æ˜¾ç¤ºä»·æ ¼ + "ç«‹å³è´­ä¹°"æŒ‰é’®
- [ ] æ— ä»·æ ¼å•†å“: æ˜¾ç¤º"éœ€æŠ¥ä»·" + "ç«‹å³å’¨è¯¢"æŒ‰é’®
- [ ] è´­ä¹°æŒ‰é’®è·³è½¬åˆ°å•†å“è¯¦æƒ…é¡µ
- [ ] å’¨è¯¢æŒ‰é’®æ‰“å¼€å’¨è¯¢è¡¨å•å¼¹çª—

#### ä»»åŠ¡6: ShopProductInfoç»„ä»¶é‡æ„ (å•†å“è¯¦æƒ…é¡µ)
- [ ] æ·»åŠ è¿”å›ä¸Šä¸€é¡µæŒ‰é’®åŠŸèƒ½
- [ ] é‡æ„ç»„ä»¶å¸ƒå±€ç»“æ„ (è¿”å›æŒ‰é’®ã€æ ‡é¢˜ã€ç®€ä»‹ã€æ ‡ç­¾ã€è§„æ ¼ã€æ€»è®¡ã€æ“ä½œ)
- [ ] æ·»åŠ å•†å“æ ‡ç­¾æ˜¾ç¤ºåŒºåŸŸ (å¤ç”¨åˆ—è¡¨é¡µé€»è¾‘ï¼Œæœ€å¤š3ä¸ª+N)
- [ ] æ·»åŠ å•†å“è§„æ ¼ä¿¡æ¯æ˜¾ç¤º (è§£æspecificationså­—æ®µ)
- [ ] å®ç°è´­ä¹°/å’¨è¯¢å•†å“UIåˆ‡æ¢é€»è¾‘
- [ ] ä¿æŒç°æœ‰æ•°é‡æ§åˆ¶å’Œä»·æ ¼åŠ¨ç”»æ•ˆæœ

#### ä»»åŠ¡7: å•†å“è¯¦æƒ…é¡µè¿”å›æŒ‰é’®åŠŸèƒ½
- [ ] åœ¨ProductInfoç»„ä»¶é¡¶éƒ¨æ·»åŠ è¿”å›æŒ‰é’®
- [ ] å®ç°è¿”å›ä¸Šä¸€é¡µå¯¼èˆªé€»è¾‘
- [ ] æ·»åŠ é€‚å½“çš„å›¾æ ‡å’Œæ ·å¼
- [ ] ç¡®ä¿ç§»åŠ¨ç«¯å’Œæ¡Œé¢ç«¯ä¸€è‡´æ€§

#### ä»»åŠ¡8: å•†å“è¯¦æƒ…é¡µæ ‡ç­¾å’Œè§„æ ¼æ˜¾ç¤º
- [ ] å®ç°å•†å“æ ‡ç­¾åŒºåŸŸ (ä¸åˆ—è¡¨é¡µä¿æŒä¸€è‡´çš„è®¾è®¡)
- [ ] è§£æå’Œæ˜¾ç¤ºå•†å“è§„æ ¼ä¿¡æ¯ (specificationså­—æ®µ)
- [ ] æ¡ä»¶æ¸²æŸ“é€»è¾‘ (æœ‰æ ‡ç­¾/è§„æ ¼æ—¶æ˜¾ç¤º)
- [ ] å“åº”å¼å¸ƒå±€é€‚é…

#### ä»»åŠ¡9: å•†å“è¯¦æƒ…é¡µå’¨è¯¢åŠŸèƒ½é›†æˆ
- [ ] é›†æˆConsultationModalç»„ä»¶åˆ°å•†å“è¯¦æƒ…é¡µ
- [ ] å®ç°å’¨è¯¢æŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶å¤„ç†
- [ ] è´­ä¹°å•†å“ï¼šä¿æŒç°æœ‰æ•°é‡æ§åˆ¶å’ŒæŒ‰é’®ç»„
- [ ] å’¨è¯¢å•†å“ï¼šéšè—æ•°é‡æ§åˆ¶ï¼Œæ˜¾ç¤º"ç«‹å³å’¨è¯¢"æŒ‰é’®
- [ ] ä¿æŒä»·æ ¼æ€»è®¡åŠ¨ç”»æ•ˆæœ (å’¨è¯¢å•†å“æ˜¾ç¤º"éœ€æŠ¥ä»·")

### éªŒæ”¶æ ‡å‡†

#### AC1: åˆ†ç±»ä¿¡æ¯å±•ç¤º
- **Given** ç”¨æˆ·åœ¨shopé¡µé¢é€‰æ‹©äº†æŸä¸ªåˆ†ç±»
- **When** é¡µé¢åŠ è½½æ—¶
- **Then** ç­›é€‰å·¥å…·æ ä¸Šæ–¹æ˜¾ç¤ºåˆ†ç±»åç§°(h1æ ‡ç­¾)å’Œåˆ†ç±»æè¿°(pæ ‡ç­¾)
- **And** æœªé€‰æ‹©åˆ†ç±»æ—¶(é€‰ä¸­"View All Products")æ˜¾ç¤ºé»˜è®¤å†…å®¹
- **And** é»˜è®¤æ ‡é¢˜: "View All Products"
- **And** é»˜è®¤æè¿°: "é€‰è´­æˆ‘ä»¬å…¨é¢çš„é«˜å“è´¨ç‰§åœºç•œç‰§å¤„ç†è®¾å¤‡ï¼Œæ—¨åœ¨æå‡ç‰§åœºçš„æ•ˆç‡å’Œå®‰å…¨æ€§ï¼Œæˆ‘ä»¬æ‹¥æœ‰æ‚¨æœ‰æ•ˆç®¡ç†ç‰²ç•œæ‰€éœ€çš„ä¸€åˆ‡ã€‚"

#### AC2: å•†å“å¡ç‰‡æ ‡ç­¾æ˜¾ç¤º
- **Given** å•†å“æœ‰tagsæ•°æ®
- **When** å•†å“å¡ç‰‡æ¸²æŸ“æ—¶
- **Then** åœ¨å•†å“æ ‡é¢˜å’Œæè¿°ä¹‹é—´æ˜¾ç¤ºæ ‡ç­¾
- **And** æ ‡ç­¾ä½¿ç”¨æ·±è‰²èƒŒæ™¯ã€åœ†è§’æ ·å¼
- **And** æ— æ ‡ç­¾æ—¶è¯¥åŒºåŸŸä¸æ˜¾ç¤º
- **And** å¤šæ ‡ç­¾æ—¶æœ€å¤šæ˜¾ç¤º3ä¸ªæ ‡ç­¾ï¼Œè¶…å‡ºéƒ¨åˆ†æ˜¾ç¤º"+N"æç¤º
- **And** æ ‡ç­¾ä¼˜å…ˆçº§ï¼šæŒ‰é‡è¦æ€§æˆ–é•¿åº¦æ’åºæ˜¾ç¤ºå‰3ä¸ª

#### AC3: å¡ç‰‡é«˜åº¦ç»Ÿä¸€
- **Given** ä¸åŒé•¿åº¦çš„å•†å“æ ‡é¢˜å’Œæè¿°
- **When** å•†å“ç½‘æ ¼æ¸²æŸ“æ—¶
- **Then** æ‰€æœ‰å•†å“å¡ç‰‡é«˜åº¦ä¿æŒä¸€è‡´
- **And** å†…å®¹è‡ªåŠ¨é€‚é…å›ºå®šé«˜åº¦å®¹å™¨

#### AC4: ä»·æ ¼åŒºåˆ†æ˜¾ç¤º
- **Given** å•†å“æ•°æ®åŒ…å«hasPriceå­—æ®µ
- **When** å•†å“å¡ç‰‡æ¸²æŸ“æ—¶
- **And** hasPrice = true: æ˜¾ç¤ºå…·ä½“ä»·æ ¼å’Œè´­ä¹°è¡Œä¸º
- **And** hasPrice = false: æ˜¾ç¤º"éœ€æŠ¥ä»·"å’Œå’¨è¯¢æŒ‰é’®
- **And** è´­ä¹°æŒ‰é’®è·³è½¬å•†å“è¯¦æƒ…, å’¨è¯¢æŒ‰é’®æ‰“å¼€å¼¹çª—

#### AC5: å’¨è¯¢è¡¨å•åŠŸèƒ½
- **Given** ç”¨æˆ·ç‚¹å‡»"ç«‹å³å’¨è¯¢"æŒ‰é’®
- **When** å¼¹çª—æ‰“å¼€æ—¶
- **Then** æ˜¾ç¤ºå®Œæ•´çš„å’¨è¯¢è¡¨å• (å§“åã€ç”µè¯ã€é‚®ç®±ã€å…¬å¸ã€ç•™è¨€)
- **And** æäº¤æˆåŠŸåæ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯å¹¶å…³é—­å¼¹çª—
- **And** è°ƒç”¨ç¦»çº¿å’¨è¯¢è®¢å•API (/offline-orders)

#### AC6: å•†å“è¯¦æƒ…é¡µè¿”å›æŒ‰é’®åŠŸèƒ½
- **Given** ç”¨æˆ·åœ¨å•†å“è¯¦æƒ…é¡µ
- **When** ç”¨æˆ·ç‚¹å‡»è¿”å›æŒ‰é’®æ—¶
- **Then** å¯¼èˆªå›ä¸Šä¸€é¡µé¢
- **And** è¿”å›æŒ‰é’®åœ¨å•†å“ä¿¡æ¯å¡ç‰‡é¡¶éƒ¨æ˜¾ç¤º
- **And** ç§»åŠ¨ç«¯å’Œæ¡Œé¢ç«¯éƒ½æœ‰è¿”å›æŒ‰é’®åŠŸèƒ½

#### AC7: å•†å“è¯¦æƒ…é¡µæ ‡ç­¾å’Œè§„æ ¼æ˜¾ç¤º
- **Given** å•†å“æœ‰tagsæˆ–specificationsæ•°æ®
- **When** å•†å“è¯¦æƒ…é¡µåŠ è½½æ—¶
- **Then** åœ¨å•†å“æ ‡é¢˜å’Œæè¿°ä¹‹é—´æ˜¾ç¤ºæ ‡ç­¾ (æœ€å¤š3ä¸ª+N)
- **And** åœ¨æ ‡ç­¾ä¸‹æ–¹æ˜¾ç¤ºå•†å“è§„æ ¼ä¿¡æ¯ (å¦‚æœæœ‰)
- **And** æ ‡ç­¾æ ·å¼ä¸åˆ—è¡¨é¡µä¿æŒä¸€è‡´
- **And** æ— æ ‡ç­¾æˆ–è§„æ ¼æ—¶éšè—å¯¹åº”åŒºåŸŸ

#### AC8: å•†å“è¯¦æƒ…é¡µä»·æ ¼åŒºåˆ†å’Œæ“ä½œé€»è¾‘
- **Given** å•†å“æ•°æ®åŒ…å«hasPriceå­—æ®µ
- **When** å•†å“è¯¦æƒ…é¡µæ¸²æŸ“æ—¶
- **And** hasPrice = true: æ˜¾ç¤ºä»·æ ¼ã€æ•°é‡é€‰æ‹©å™¨ã€åŠ å…¥è´­ç‰©è½¦ã€ç«‹å³è´­ä¹°æŒ‰é’®
- **And** hasPrice = false: æ˜¾ç¤º"éœ€æŠ¥ä»·"ã€ç«‹å³å’¨è¯¢æŒ‰é’®ï¼Œéšè—æ•°é‡é€‰æ‹©å™¨
- **And** ä»·æ ¼æ€»è®¡åŒºåŸŸæ ¹æ®å•†å“ç±»å‹åŠ¨æ€åˆ‡æ¢å†…å®¹
- **And** ä¿æŒç°æœ‰çš„æ•°é‡å˜åŒ–å’Œä»·æ ¼è®¡ç®—åŠ¨ç”»æ•ˆæœ

#### AC9: å•†å“è¯¦æƒ…é¡µå’¨è¯¢è¡¨å•é›†æˆ
- **Given** ç”¨æˆ·åœ¨å’¨è¯¢å•†å“è¯¦æƒ…é¡µç‚¹å‡»"ç«‹å³å’¨è¯¢"
- **When** å’¨è¯¢å¼¹çª—æ‰“å¼€æ—¶
- **Then** æ˜¾ç¤ºä¸åˆ—è¡¨é¡µä¸€è‡´çš„å’¨è¯¢è¡¨å•
- **And** è¡¨å•é¢„å¡«å……å½“å‰å•†å“ä¿¡æ¯
- **And** æäº¤åé›†æˆç¦»çº¿å’¨è¯¢è®¢å•API
- **And** æˆåŠŸåå…³é—­å¼¹çª—å¹¶æ˜¾ç¤ºæˆåŠŸæç¤º

## é™„åŠ ä¸Šä¸‹æ–‡

### ä¾èµ–é¡¹

1. **API v1.4.0æ”¯æŒ** - ç¡®ä¿åç«¯å·²éƒ¨ç½²åŒ…å«hasPriceå’Œtagså­—æ®µçš„å•†å“API
2. **ç¦»çº¿å’¨è¯¢è®¢å•API** - /offline-orders POSTæ¥å£å¯ç”¨
3. **åˆ†ç±»API descriptionå­—æ®µ** - ç¡®è®¤åˆ†ç±»APIè¿”å›descriptionæ•°æ®

### æµ‹è¯•ç­–ç•¥

1. **ç»„ä»¶æµ‹è¯•** - ProductCardåœ¨ä¸åŒæ•°æ®ä¸‹çš„æ¸²æŸ“
2. **APIé›†æˆæµ‹è¯•** - å’¨è¯¢è¡¨å•æäº¤åŠŸèƒ½
3. **å“åº”å¼æµ‹è¯•** - ç§»åŠ¨ç«¯å’Œæ¡Œé¢ç«¯æ˜¾ç¤ºæ•ˆæœ
4. **è¾¹ç•Œæƒ…å†µæµ‹è¯•** - æ— æ ‡ç­¾å•†å“ã€æ— åˆ†ç±»é€‰ä¸­ç­‰

### æ³¨æ„äº‹é¡¹

1. **ä¿æŒç°æœ‰æ ·å¼ä¸€è‡´æ€§** - éµå¾ªç°æœ‰çš„è®¾è®¡ç³»ç»Ÿå’Œé¢œè‰²æ–¹æ¡ˆ
2. **å›½é™…åŒ–æ”¯æŒ** - æ–°å¢æ–‡æœ¬éœ€è¦æ·»åŠ ä¸­è‹±æ–‡ç¿»è¯‘
3. **é”™è¯¯å¤„ç†** - APIè°ƒç”¨å¤±è´¥æ—¶çš„ç”¨æˆ·å‹å¥½æç¤º
4. **æ€§èƒ½ä¼˜åŒ–** - é¿å…é‡å¤çš„APIè°ƒç”¨ï¼Œåˆç†ç¼“å­˜åˆ†ç±»ä¿¡æ¯
5. **å¯è®¿é—®æ€§** - ç¡®ä¿æ‰€æœ‰æŒ‰é’®å’Œè¡¨å•å…ƒç´ æœ‰é€‚å½“çš„ariaæ ‡ç­¾
6. **åŠ¨ç”»æ•ˆæœä¿æŒ** - ç¡®ä¿é‡æ„åä¸ç ´åç°æœ‰çš„æ•°é‡å’Œä»·æ ¼åŠ¨ç”»
7. **å‘åå…¼å®¹** - ç¡®ä¿ç°æœ‰åŠŸèƒ½åœ¨é‡æ„åç»§ç»­æ­£å¸¸å·¥ä½œ
8. **ç»„ä»¶çŠ¶æ€ç®¡ç†** - å’¨è¯¢å¼¹çª—çš„çŠ¶æ€éœ€è¦åœ¨åˆ—è¡¨é¡µå’Œè¯¦æƒ…é¡µä¹‹é—´æ­£ç¡®ç®¡ç†
9. **ç§»åŠ¨ç«¯é€‚é…** - å•†å“è¯¦æƒ…é¡µè¿”å›æŒ‰é’®åœ¨ç§»åŠ¨ç«¯çš„æ˜¾ç¤ºå’Œäº¤äº’ä¼˜åŒ–
10. **å•†å“è§„æ ¼è§£æ** - specificationså­—æ®µå¯èƒ½åŒ…å«å¤æ‚æ ¼å¼ï¼Œéœ€è¦é€‚å½“çš„è§£æå’Œæ˜¾ç¤ºé€»è¾‘

### APIå­—æ®µæ˜ å°„

```typescript
// Productæ¥å£æ–°å¢å­—æ®µ
interface Product {
  id: string
  name: string
  description: string
  content?: string
  price: string
  originalPrice?: string
  stock: number
  images: string[]
  specifications?: string  // å•†å“è§„æ ¼è¯´æ˜ï¼Œå¯èƒ½éœ€è¦è§£ææ˜¾ç¤º
  status: number
  category?: {
    id: string
    name: string
  }
  // ğŸ†• v1.4.0 æ–°å¢å­—æ®µ
  hasPrice: boolean     // APIè¿”å›å­—æ®µï¼ŒåŒºåˆ†è´­ä¹°/å’¨è¯¢å•†å“
  tags: string[] | null // APIè¿”å›å­—æ®µï¼Œå•†å“æ ‡ç­¾æ•°ç»„
  createdAt: string
}

// å’¨è¯¢è®¢å•APIå­—æ®µ
interface ConsultationOrder {
  productId: string    // å¿…éœ€ï¼šå•†å“ID
  name: string         // å¿…éœ€ï¼šè”ç³»äººå§“å
  phone: string        // å¿…éœ€ï¼šè”ç³»ç”µè¯
  email?: string       // å¯é€‰ï¼šé‚®ç®±åœ°å€
  company?: string     // å¯é€‰ï¼šå…¬å¸åç§°
  message?: string     // å¯é€‰ï¼šå’¨è¯¢å†…å®¹
}

// ShopProductInfoç»„ä»¶Propsæ¥å£
interface ProductInfoProps {
  modelValue: number   // å•†å“æ•°é‡
  product: Product     // å•†å“ä¿¡æ¯
  showBackButton?: boolean  // æ˜¯å¦æ˜¾ç¤ºè¿”å›æŒ‰é’® (é»˜è®¤true)
}

// ConsultationModalç»„ä»¶Propsæ¥å£
interface ConsultationModalProps {
  isOpen: boolean      // å¼¹çª—æ˜¯å¦æ‰“å¼€
  product: Product     // å•†å“ä¿¡æ¯ (ç”¨äºé¢„å¡«å……)
  onClose: () => void  // å…³é—­å¼¹çª—å›è°ƒ
  onSubmit: (data: ConsultationOrder) => Promise<void>  // æäº¤å›è°ƒ
}

// å•†å“æ ‡ç­¾æ˜¾ç¤ºé€»è¾‘
interface DisplayTag {
  text: string
  isMore?: boolean     // æ˜¯å¦ä¸º"+N"ç±»å‹æ ‡ç­¾
}
```

### å•†å“è¯¦æƒ…é¡µé‡æ„æ¶æ„

```typescript
// å•†å“è¯¦æƒ…é¡µé¢çŠ¶æ€ç®¡ç†
interface ProductDetailState {
  product: Product | null
  quantity: number
  isAddingToCart: boolean
  cartMessage: string
  itemInCartQuantity: number
  isConsultationModalOpen: boolean
  quantityAnimationKey: number  // ç”¨äºè§¦å‘åŠ¨ç”»
}

// è¿”å›æŒ‰é’®åŠŸèƒ½
const handleBack = () => {
  // ä½¿ç”¨æµè§ˆå™¨å†å²APIè¿”å›ä¸Šä¸€é¡µ
  window.history.back()
}

// å’¨è¯¢æŒ‰é’®å¤„ç†
const handleConsultation = () => {
  // æ‰“å¼€å’¨è¯¢å¼¹çª—
  isConsultationModalOpen.value = true
}

// å’¨è¯¢è¡¨å•æäº¤
const handleConsultationSubmit = async (data: ConsultationOrder) => {
  // è°ƒç”¨ç¦»çº¿å’¨è¯¢è®¢å•API
  await submitConsultation(data)
  // å…³é—­å¼¹çª—
  isConsultationModalOpen.value = false
  // æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯
  showSuccessMessage('å’¨è¯¢æäº¤æˆåŠŸ')
}
```

---

ğŸ¯ **æ­¤æŠ€æœ¯è§„æ ¼å·²å‡†å¤‡å°±ç»ªï¼Œå¯ä»¥å¼€å§‹å¼€å‘å®æ–½ï¼**